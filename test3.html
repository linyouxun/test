<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>h5活动页</title>
  <link href="https://cdn.bootcss.com/Swiper/3.2.0/css/swiper.css" rel="stylesheet">
  <style type="text/css">
   *{padding:0;margin:0}html,body{position:relative;height:100%}.wraper{width:100%;max-width:720px;margin:auto;height:auto;margin-bottom:60px}.baoming,.success{width:100%;max-width:720px;height:100%;overflow:scroll;position:fixed;top:0;left:0;z-index:2;background:rgba(0,0,0,0.8);left:50%;transform:translateX(-50%)}.bmWarp{width:90%;background:#fff;position:absolute;top:50%;left:50%;-moz-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);border-radius:10px}.bmWarp .lpForm{padding:15px}.bmWarp .bmClose,.success .TcClose{width:20px;height:20px;line-height:13px;position:absolute;top:10px;right:10px;font-size:34px;text-align:center;font-weight:100}.bmWarp .bmHead{width:100%;height:24px;line-height:24px;color:#4b4645;text-align:center;font-size:21px;margin-top:0}.bmWarp p{margin-top:10px;position:relative}.bmWarp .lpForm .bmmsg{text-align:center;font-size:14px;height:21px;line-height:21px;margin-top:5px}.bmWarp p{margin-top:10px;position:relative}.bmWarp .lpForm .bmmsg .bmmsg_bg{display:inline-block;background:#f7f6f6;border-radius:15px;color:#4b4645;padding:0 12px;font-weight:normal}.bmWarp .lpForm .bmmsg span{color:#f72e2e;font-weight:bold;padding:0 2px}.bmWarp p{margin-top:10px;position:relative}.bmWarp .lpForm p .name,.bmWarp .lpForm p .tel{width:100%;text-indent:10px;background:#fffbf8;color:#4b4645;font-size:16.5px;margin-top:3px;box-sizing:border-box}.bmWarp input{height:50px;line-height:17px;border-radius:5px;border:1px solid #ff7000;background:#fff}.bmWarp .tips{height:auto;line-height:12px;margin-top:13px;color:#ff7000;padding-left:10px;font-size:12px}.bmWarp .lpForm .lpBtn{display:block;width:100%;height:55px;line-height:55px;border-radius:3px;text-align:center;font-size:18px;font-weight:bold;color:#fff;background:#ff7000;border-bottom:0 solid #e30e0e;margin-top:15px!important}.stay{width:100%;max-width:720px;height:100%;position:fixed;top:0;left:0;z-index:2;background:rgba(0,0,0,0.8)}.stayWarp{width:90%;position:absolute;top:50%;left:50%;-moz-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.hide{display:none}.stayWarp .stayBox,.stayWarp .stayBox2{background:#fff;border-radius:5px;font-size:0;text-align:center;padding:15px}.stayWarp .yojuImg{display:inline-block;width:103px;height:110px;background:url('http://test-img.yoju360.com/pageActivity/201711110257431510383463230.png') center center no-repeat;background-size:103px 110px;margin-top:-67px}.stayWarp .stayBox .stayText,.stayWarp .stayBox2 .stayText{width:88%;font-size:16px;padding:10px 0 0 0;text-align:left;margin:0 auto}.stayWarp .btnRows{margin-top:15px}.stayWarp .stayBtn{width:47%;height:45px;line-height:45px;text-align:center;font-size:15px;display:inline-block;border-radius:5px}.stayWarp .stayBtn2{background:#e1dcd9;color:#fff;margin-right:5px}.stayWarp .stayBtn1{background:#ff7000;color:#fff;margin-left:5px}.succeedText1{font-size:24px;color:#4b4645;text-align:center;padding-top:35px;height:66px;line-height:16px}.succeed-done{display:inline-block;width:17px;height:17px;background:url('http://test-img.yoju360.com/pageActivity/201711110257431510383463230.png') no-repeat center center;background-size:17px;vertical-align:top;margin-right:5px}.swiper-container{width:100%;height:100%}.swiper-slide{position:relative}.swiper-slide .bg-img{width:100%;height:100%}.baoming-btn{position:absolute;bottom:30px;height:auto;display:block;width:90%;left:5%;margin:0 auto 5px auto}.next{width:20%;height:30px;margin:0 auto;left:40%;bottom:0;position:absolute}.next img{-webkit-animation:.5s .5s ease infinite alternate;-webkit-animation-name:sldearrow;-moz-animation:.5s .5s ease infinite alternate;-moz-animation-name:sldearrow;animation:.5s .5s ease infinite alternate;animation-name:sldearrow;width:100%;position:relative;z-index:1;bottom:6px;display:block;margin:0 auto}@-webkit-keyframes sldearrow{0%{bottom:0;opacity:1}100%{bottom:6px;opacity:.6}}@-moz-keyframes sldearrow{0%{bottom:0;opacity:1}100%{bottom:6px;opacity:.6}}@keyframes sldearrow{0%{bottom:0;opacity:1}100%{bottom:6px;opacity:.6}}.swiper-pagination{right:10px;top:50%;-webkit-transform:translate3d(0,-50%,0);-moz-transform:translate3d(0,-50%,0);-o-transform:translate(0,-50%);-ms-transform:translate3d(0,-50%,0);transform:translate3d(0,-50%,0)}
  </style>
</head>
<body>
  <div class="wraper swiper-container">
    <div class="swiper-wrapper">
        	      <div class="swiper-slide">
          	<img class="bg-img" src="http://static.yoju360.com/pageActivity/1510192307198q51q" alt="">
          	<img class="baoming-btn" src="http://test-img.yoju360.com/pageActivity/201711110300101510383610450.png" alt="" onclick="baoming(true)">
          </div>
	      <div class="swiper-slide">
          	<img class="bg-img" src="http://static.yoju360.com/pageActivity/1510192470764yj94" alt="">
          	<img class="baoming-btn" src="http://test-img.yoju360.com/pageActivity/201711110300101510383610450.png" alt="" onclick="baoming(true)">
          </div>
    </div>
    <div class="swiper-pagination"></div>
  </div>
  <!-- 向上箭头 -->
  <div class="next">
    <div class="slidetips">
        <a href="javascript:void(0);" title="NEXT" id="next">
      <img src="http://test-img.yoju360.com/pageActivity/201711110259161510383556309.png">   	        </a>
    </div>
  </div>
  <!-- 报名 -->
  <div class="baoming hide" id="baoming" onclick="baoming(false)">
    <div class="bmWarp" onclick="stopPropagation(event)">
      <div class="lpForm">
        <span class="bmClose" onclick="baomingClose(true)">×</span>
        <div class="bmHead">
          <p class="lph">免费报名</p>
        </div>
        <p class="bmmsg"><span class="bmmsg_bg">已有<span>5</span>人报名成功！</span></p>

        <p>
          <input type="text" name="name" class="name" placeholder="请填写姓名">
        </p>
        <p>
          <input type="number" name="tel" class="tel" placeholder="请填写手机号码">
        </p>
        <p class="tips" style="color:#EE0000">*该手机号仅用于本次活动</p>
        <p class="lpBtn false" onclick="submit()">立即报名</p>
      </div>
    </div>
  </div>
  <!-- 报名挽留框 -->
  <div class="stay hide" id="stay" onclick="stay(false)">
    <div class="stayWarp" style="top: 50%;" onclick="stopPropagation(event)">
      <div class="stayBox">
        <span class="yojuImg"></span>
          <p class="stayText"> 名额有限，机不可失，您确定取消报名？</p>
          <p class="btnRows">
            <span class="stayBtn stayBtn2" onclick="stay(false)">取消报名</span>
            <span class="stayBtn stayBtn1" onclick="baomingClose(false)">返回报名</span>
          </p>
      </div>
    </div>
  </div>
  <!-- 报名成功 -->
  <div class="success hide" id="success" onclick="successTip(false)">
    <div class="bmWarp" onclick="stopPropagation(event)">
      <span class="TcClose" onclick="successTip(false)">×</span>
      <div class="succeedText1"><p style="color:#000"><i class="succeed-done"></i>恭喜您报名成功！</p></div>
    </div>
  </div>
  <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://cdn.bootcss.com/Swiper/3.2.5/js/swiper.min.js"></script>
  <script type="text/javascript">
    $(document).ready(function(){var $pages=$(".swiper-wrapper").children();var slideCount=$pages.length;var mySwiper=new Swiper(".swiper-container",{direction:"vertical",pagination:".swiper-pagination",});var bindNext=function(){$(".next").on("click",function(){mySwiper.activeIndex=mySwiper.activeIndex||0;var index=mySwiper.activeIndex==slideCount-1?0:(mySwiper.activeIndex||0)+1;mySwiper.slideTo(index)})};bindNext()});
    function baoming(flat){if(flat){$("#baoming").removeClass("hide")}else{$("#baoming").addClass("hide")}};
    function baomingClose(flat){baoming(!flat);stay(flat)};
    function stay(flat){if(flat){$("#stay").removeClass("hide")}else{$("#stay").addClass("hide")}}
    function successTip(flat){if(flat){$("#success").removeClass("hide")}else{$("#success").addClass("hide")}};
    function stopPropagation(event){event.stopPropagation()};
    function submit(){
      let name = $("input[name='name']")[0].value.trim();
      let phone = $("input[name='tel']")[0].value.trim();
      let link = window.location.href;
      link = link.substring(link.indexOf("page_show")+9);
      if (checkPhone(phone)) {
        $.ajax({
            type: "POST",
            url: "http://api.yoju360.com/decorate/decoration/design",
            contentType: "application/json", //必须有
            dataType: "json", //表示返回值类型，不必须
            data: JSON.stringify({
                nickName:name,
                mobile:phone,
                link:link,
                pageType:2,
                pageActivityId:1
            }),
            success: function (res) {
                if (res.code == 200) {
                  baoming(false);
                  successTip(true);
                } else {
                  alert('报名失败');
                }
            }
        });
      }
    }
    function checkPhone(phone){if(!(/^1[34578]\d{9}$/.test(phone))){alert("手机号码有误，请重填");return false}return true};
  </script>
</body>
</html>